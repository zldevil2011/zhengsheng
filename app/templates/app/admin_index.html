{% extends "app/base.html" %}
{% block title %}Account_admin{% endblock %}
{% block main_body %}
    <div class="main-body">
         <div class="clearfix">
             <div id="map" style="width:100%;height:400px; border: 1px solid rgba(0, 0, 0, 0.04); border-radius: 6px;"></div>
         </div>

        <div name="waiting-list" style="margin: 1rem 1rem;">
            <div class="row">
                <div class="col-md-3">
                    <div class="alert alert-white alert-dismissable" style="">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                        <h4 style="background-color: #d58512; width: 50%; border-radius: 6px;text-align: center; color: white;">
                            Cloud Speed
                        </h4>
                        <h1 style="text-align: center;color:#d58512; ">47Km/h</h1>
                        <h6 style="text-align: center;"><span class="icon-download"></span>explanation</h6>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="alert alert-white alert-dismissable" style="">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                        <h4 style="background-color: #45b6b0; width: 50%; border-radius: 6px;text-align: center; color: white;">
                            Train Speed
                        </h4>
                        <h1 style="text-align: center;color:#45b6b0; ">220Km/h</h1>
                        <h6 style="text-align: center;"><span class="icon-download"></span>explanation</h6>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="alert alert-white alert-dismissable" style="">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                        <h4 style="background-color: #65c3df; width: 50%; border-radius: 6px;text-align: center; color: white;">
                            PM2.5
                        </h4>
                        <h1 style="text-align: center;color:#65c3df; ">50/优</h1>
                        <h6 style="text-align: center;"><span class="icon-download"></span>explanation</h6>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="alert alert-white alert-dismissable" style="">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                        <h4 style="background-color: #ff6b6b; width: 50%; border-radius: 6px;text-align: center; color: white;">
                            Accident
                        </h4>
                        <h1 style="text-align: center;color:#ff6b6b; ">67%</h1>
                        <h6 style="text-align: center;"><span class="icon-download"></span>explanation</h6>
                    </div>
                </div>
            </div>
        </div>
        <div name="chart-info">
            <div class="clearfix" style="color:black;">
                <div class="col-md-6">
                    <div id="container" style="min-width:100%;height:400px"></div>
                    <div class="detail-info" style="background-color: #FFFFFF;">
                        <div class="clearfix">
                            <div class="col-md-6">
                                <h5>Speed Average</h5>
                                <h1>74</h1>
                            </div>
                            <div class="col-md-6" style="text-align: right;">
                                <h5>Traffic per day</h5>
                                <h1>2.5874</h1>
                            </div>
                            <div class="clearfix" style="margin-top: 2rem;">
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>76 % -1,2 %</h5>
                                </div>
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>25 % -1,8 %</h5>
                                </div>
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>83 % -1,9 %</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" style="">
                    <div id="container1" style="min-width:100%;height:400px;background-color: #65c3df;">
                        <div class="clearfix">
                            <div class="col-md-6">
                                <h2>星期一&nbsp;07:30:AM</h2>
                            </div>
                            <div class="col-md-6" style="text-align: right;">
                                <h2>池州</h2>
                            </div>
                        </div>
                        <div class="clearfix" style="text-align: center;">
                            <span class=""></span>
                        </div>
                    </div>
                    <div class="detail-info" style="background-color: #84cfe6;">
                        <div class="clearfix">
                            <div class="col-md-6">
                                <h5>Speed Average</h5>
                                <h1>74</h1>
                            </div>
                            <div class="col-md-6" style="text-align: right;">
                                <h5>Traffic per day</h5>
                                <h1>2.5874</h1>
                            </div>
                            <div class="clearfix" style="margin-top: 2rem;">
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>76 % -1,2 %</h5>
                                </div>
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>25 % -1,8 %</h5>
                                </div>
                                <div class="col-md-4" style="text-align: center;">
                                    <button class="btn btn-info btn-block">Traffic Rate</button>
                                    <h5>83 % -1,9 %</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block special_js %}
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=WZVN4DbW3hfB9MSgMmwVQBHU8ZV8jRxW"></script>
    <script async src="http://c.cnzz.com/core.php"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js"></script>
    <script>
        var map = new BMap.Map("map");          // 创建地图实例
        var point = new BMap.Point(117.48, 30.67);  // 创建点坐标
        var sContent =
        "<h4 style='margin:0 0 5px 0;padding:0.2em 0'>池州</h4>" +
        "<img style='float:right;margin:4px' id='imgDemo' src='http://app.baidu.com/map/images/tiananmen.jpg' width='139' height='104' title='天安门'/>" +
        "<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>天安门坐落在中国北京市中心,故宫的南侧,与天安门广场隔长安街相望,是清朝皇城的大门...</p>" +
        "</div>";
        var infoWindow = new BMap.InfoWindow(sContent);  // 创建信息窗口对象
        var marker = new BMap.Marker(point);
        map.addOverlay(marker);
        marker.addEventListener("click", function(){
           this.openInfoWindow(infoWindow);
           //图片加载完毕重绘infowindow
           document.getElementById('imgDemo').onload = function (){
               infoWindow.redraw();   //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
           }
        });
        marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
        map.addControl(new BMap.NavigationControl());
        map.addControl(new BMap.ScaleControl());
        map.addControl(new BMap.OverviewMapControl());
        map.addControl(new BMap.MapTypeControl());
        var geolocationControl = new BMap.GeolocationControl();
        geolocationControl.addEventListener("locationSuccess", function(e){
            // 定位成功事件
            var address = '';
            address += e.addressComponent.province;
            address += e.addressComponent.city;
            address += e.addressComponent.district;
            address += e.addressComponent.street;
            address += e.addressComponent.streetNumber;
            alert("当前定位地址为：" + address);
        });
        geolocationControl.addEventListener("locationError",function(e){
            // 定位失败事件
            alert(e.message);
        });
        map.addControl(geolocationControl);
        map.centerAndZoom(point, 15);                 // 初始化地图，设置中心点坐标和地图级别
        map.enableScrollWheelZoom();

        map.enableInertialDragging();
        map.enableContinuousZoom();
        var size = new BMap.Size(10, 20);
        map.addControl(new BMap.CityListControl({
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            offset: size
        }));
        var lushu;
        // 实例化一个驾车导航用来生成路线
        var drv = new BMap.DrivingRoute('安徽', {
            onSearchComplete: function(res) {
                if (drv.getStatus() == BMAP_STATUS_SUCCESS) {
                    var plan = res.getPlan(0);
                    var arrPois =[];
                    for(var j=0;j<plan.getNumRoutes();j++){
                        var route = plan.getRoute(j);
                        arrPois= arrPois.concat(route.getPath());
                    }
                    map.addOverlay(new BMap.Polyline(arrPois, {strokeColor: '#111'}));
                    map.setViewport(arrPois);

                    lushu = new BMapLib.LuShu(map,arrPois,{
                    defaultContent:"从池州到合肥",
                    autoView:true,//是否开启自动视野调整，如果开启那么路书在运动过程中会根据视野自动调整
                    icon  : new BMap.Icon('http://developer.baidu.com/map/jsdemo/img/car.png', new BMap.Size(52,26),{anchor : new BMap.Size(27, 13)}),
                    speed: 60000,
                    enableRotation:true,//是否设置marker随着道路的走向进行旋转
                    });
                }
            }
        });
        drv.search('池州', '合肥');
        window.onload = function(){
            lushu.start();
        }

    </script>
{% endblock %}